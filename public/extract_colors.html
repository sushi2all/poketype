<!DOCTYPE html>
<html>
<head>
    <title>Extract Type Colors</title>
</head>
<body>
    <h1>Extracting colors from type icons...</h1>
    <pre id="output"></pre>
    
    <script>
        const types = ['bug', 'dark', 'dragon', 'electric', 'fairy', 'fighting', 
                      'fire', 'flying', 'ghost', 'grass', 'ground', 'ice', 
                      'normal', 'poison', 'psychic', 'rock', 'steel', 'water'];
        
        const colors = {};
        let loaded = 0;
        
        function rgbToHex(r, g, b) {
            return "#" + [r, g, b].map(x => {
                const hex = x.toString(16);
                return hex.length === 1 ? "0" + hex : hex;
            }).join("").toUpperCase();
        }
        
        function getDominantColor(img) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0);
            
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            let r = 0, g = 0, b = 0, count = 0;
            
            // Sample pixels (every 10th pixel for performance)
            for (let i = 0; i < data.length; i += 40) {
                r += data[i];
                g += data[i + 1];
                b += data[i + 2];
                count++;
            }
            
            r = Math.round(r / count);
            g = Math.round(g / count);
            b = Math.round(b / count);
            
            return rgbToHex(r, g, b);
        }
        
        function processImage(type) {
            const img = new Image();
            img.crossOrigin = 'anonymous';
            img.onload = function() {
                const color = getDominantColor(img);
                colors[type] = color;
                loaded++;
                
                if (loaded === types.length) {
                    displayResults();
                }
            };
            img.onerror = function() {
                console.error(`Failed to load ${type}`);
                loaded++;
                if (loaded === types.length) {
                    displayResults();
                }
            };
            img.src = `http://localhost:5173/types/${type}.png`;
        }
        
        function displayResults() {
            const output = document.getElementById('output');
            let result = "export const typeColors = {\n";
            
            const sortedTypes = Object.keys(colors).sort();
            sortedTypes.forEach(type => {
                result += `  ${type}: '${colors[type]}',\n`;
            });
            
            result += "};\n";
            output.textContent = result;
            console.log(result);
        }
        
        // Start processing all images
        types.forEach(type => processImage(type));
    </script>
</body>
</html>

